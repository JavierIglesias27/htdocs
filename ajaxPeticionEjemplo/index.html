<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.0.0/jquery.min.js"></script>
		<title>Document</title>
		<!--Uno: (Form)
		4 inputs:
			String: Nombre
			String: Email
			Int: Phone
			String: Password
			Boton: Debe guardar los datos en la base de datos siempre y cuando el email no exista ya en ésta 
		Dos: (Form)
			1 input:
			Nombre:
			Botón: Mostrará todos los datos en formato tabla de las personas que coincidan con el nombre introducido en el input anterior
		Tres: (Form)
			2 input:
			Email
			Password
			Botón: Debe devolver un mensaje diciendo si el usuario introdujo una pareja válida o si alguno de los campos no es correcto (típico mensaje de "Usuario y o contraseña inválido")
		Cuatro: Deben haber una o más cajas donde se pueda leer los registros de error y o éxito del código
		Cinco: El campo contraseña debe estar cifrado en la DB
			-->
		<style>
			div {
				margin: 20px;
				padding: 20px;
			}
			fieldset {
				background-color: grey;
				text-align: center;
			}
			legend {
				text-transform: uppercase;
			}
		</style>
	</head>
	<body>
		<div id="crearTabla" style="background-color: red"></div>
		<fieldset>
			<legend>Introducir datos en tabla SQL</legend>
			<div id="insertarDatos">
				<label>Name</label>
				<input type="text" id="name" placeholder="Nombre" />
				<br />
				<br />
				<label>Email</label>
				<input type="text" id="email" placeholder="Email" />
				<br />
				<br />
				<label>Telefono</label>
				<input type="text" id="phone" placeholder="Phone" />
				<br />
				<br />
				<label>Contraseña</label>
				<input type="text" id="password" placeholder="password" />
				<br />
				<br />
				<button onclick="enviarDatosFuncion()">Add to DB</button>
			</div>
		</fieldset>
		<fieldset>
			<legend>Introducir nombre y dar datos</legend>
			<label>Nombre</label>
			<input type="text" id="name1" placeholder="Nombre" />
			<button onclick="selectName()">Sign</button>
			<div id="selectName" style="background-color: violet"></div>
		</fieldset>
		<fieldset>
			<legend>Mail+Contraseña</legend>
			<br />
			<br />
			<label>Email</label>
			<input type="text" id="emailSignIn" placeholder="Email" />
			<br />
			<br />
			<label>Contraseña</label>
			<br />
			<br />
			<input type="text" id="passwordSignIn" placeholder="password" />
			<button onclick="signIn()">Sign</button>
			<div id="InsertarDatosLog" style="background-color: orange"></div>
		</fieldset>

		<script>
			$.ajax({
				url: "./form.php",
				type: "POST",
				data: {
					formulario: 1,
				},
				//dataType: "json", //esta quitado xq hola NO ES UN JSON es texto plano
				success: function (response) {
					if (response == 0) {
						document.getElementById("crearTabla").innerHTML += "error Data";
					} else {
						document.getElementById("crearTabla").innerHTML += response;
					}
				},
				error: function (error) {
					console.log("ERROR" + error);
				},
			});
			$.ajax({
				url: "./form.php",
				type: "POST",
				data: {
					formulario: 2,
				},
				//dataType: "json", //esta quitado xq hola NO ES UN JSON es texto plano
				success: function (response) {
					if (response == 0) {
						document.getElementById("crearTabla").innerHTML += "error Data";
					} else {
						document.getElementById("crearTabla").innerHTML += response;
					}
				},
				error: function (error) {
					console.log("ERROR" + error);
				},
			});

			function enviarDatosFuncion() {
				let name = document.getElementById("name").value;
				let email = document.getElementById("email").value;
				let password = document.getElementById("password").value;
				let phone = document.getElementById("phone").value;

				if (name == "" || !isNaN(name)) {
					alert("el campo nombre no puede estar vacio");
					return null;
				}
				if (email == "" || !isNaN(email)) {
					alert("elcampo email  no puede estar vacio");
					return null;
				}
				/*falta poner regex pasword,phone*/
				if (password == "" || !isNaN(password)) {
					alert(" el campo password  no puede estar vacio");
					return null;
				}
				if (isNaN(phone)) {
					alert(" el campo phone  no puede estar vacio");
					return null;
				}
				/*mirar si el mail  es unico*/
				$.ajax({
					url: "./form.php",
					type: "POST",
					data: {
						formulario: 3,
						name: name,
						email: email,
						password: password,
						phone: phone,
					},
					//dataType: "json", //esta quitado xq hola NO ES UN JSON es texto plano
					success: function (response) {
						if (response == 0) {
							document.getElementById("crearTabla").innerHTML += "error";
						} else {
							document.getElementById("crearTabla").innerHTML += response;
						}
					},
					error: function (error) {
						console.log("ERROR" + error);
					},
				});
			}

			function selectName() {
				let name = document.getElementById("name1").value;

				$.ajax({
					url: "./form.php",
					type: "POST",
					data: {
						formulario: 4,
						name: name,
					},
					//dataType: "json", //esta quitado xq hola NO ES UN JSON es texto plano
					success: function (response) {
						if (response == 0) {
							document.getElementById("selectName").innerHTML += "error";
						} else {
							document.getElementById("selectName").innerHTML += response;
						}
					},
					error: function (error) {
						console.log(error);
					},
				});
			}

			function signIn() {
				let email = document.getElementById("emailSignIn").value;
				let password = document.getElementById("passwordSignIn").value;
				if (email == "" || !isNaN(email)) {
					alert("el campo email  no puede estar vacio");
					return null;
				}
				/*falta poner regex pasword,phone*/
				if (password == "" || !isNaN(password)) {
					alert(" el campo password  no puede estar vacio");
					return null;
				}
				$.ajax({
					url: "./form.php",
					type: "POST",
					data: {
						formulario: 5,
						email: email,

						password: password,
					},
					//dataType: "json", //esta quitado xq hola NO ES UN JSON es texto plano
					success: function (response) {
						if (response == 0) {
							document.getElementById("InsertarDatosLog").innerHTML += "error";
						} else {
							document.getElementById("InsertarDatosLog").innerHTML += response;
						}
					},
					error: function (error) {
						console.log(error);
					},
				});
			}
		</script>
	</body>
</html>
